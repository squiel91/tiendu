</div>
<style>
  .subscribe-section {
    background-image: url(/statics/assets/newsletter-background.jpg);
    background-size: cover;
    background-position: center;
    color: white;
    padding: 100px 0;
    margin: 60px 0;
    display: flex;
    text-align: center;
  }

  .newsletter-section button {
    border: none;
    background-color: transparent;
    color: #5f9061;
    font-weight: bold;
  }

  .subscribe-section .container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .subscribe-section .newsletter-section {
    min-width: 100%;  
  }

  @media screen and (min-width: 992px) {
    .subscribe-section .newsletter-section {
      min-width: 50%;
    }
  }

  .subscribe-section .secondlyInputInner {
    background-color: white;
  }

</style>
<section class="subscribe-section">
  <div class="container">
    <h1 style="margin-bottom: 0.3em;">Se parte de una revolución natural</h1>
    <p style="margin-bottom: 2.5em;">Recibe las ultimas ofertas, enterate de nuevas plantas ¡y mucho más!</p>
    <div id="" class="validatable-input newsletter-section newsletter-section-col" style="margin-bottom: 16px;">
      <div class="secondlyInputInner">
        <label for="newsletter-section">Email</label>
        <input id="newsletter-section" class="dontDisable" type="text">
        <button class="subscribe-newsletter-section">Uníte</button>
      </div>
      <div class="secondlyErrorMessage" style="margin-top: 8px; width: unset; text-align: start;"></div>
    </div>
  </div>
  <script>
    function subscribeOnSection() {
      $('.newsletter-section').removeClass('error')
      const email = $('input#newsletter-section').val()
      if (email) { // valid email
        $('.newsletter-section button').text('Enviando...').prop('disabled', true)
        fetch('/api/subscribe', {
          method: 'POST',
          credentials: 'same-origin',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email, _csrf: '<%= csrfToken %>' })
        })
          .then((response) => {
            return response.json()
          })
          .then(body => {
            console.log(body)
            if (body.error) {
              throw  new Error(body.fields[0].message);
            } else {
              $('.newsletter-section-col').html('<p><span style="font-weight: bold; color: green;">¡Lo hiciste!</span> Pronto escucharás más sobre nosotros.</p>')
            }
            $('.newsletter-section button').text('Únete').prop('disabled', false)
          })
          .catch(function(error) {
            $('.newsletter-section .secondlyErrorMessage').text(error.message)
            $('.newsletter-section').addClass('error')
            $('.newsletter-section button').text('Únete').prop('disabled', false)
          })
      }
    }

    $('.newsletter-section button').click((event => subscribeOnSection()))
    $('.newsletter-section input').on('keypress', event => {
      if(event.which == 13) subscribe()
    })
  </script>
</section>
<div class="container">